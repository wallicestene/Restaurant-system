"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const events_1 = __importDefault(require("events"));
class NativeRefreshEventsHandlerService {
    constructor(actionPermissionService, usersPermissionService, renderingPermissionService) {
        this.actionPermissionService = actionPermissionService;
        this.usersPermissionService = usersPermissionService;
        this.renderingPermissionService = renderingPermissionService;
        this.eventEmitter = new events_1.default();
    }
    refreshUsers() {
        this.usersPermissionService.invalidateCache();
    }
    refreshRoles() {
        this.actionPermissionService.invalidateCache();
    }
    refreshRenderings(renderingIds) {
        for (const renderingId of renderingIds)
            this.renderingPermissionService.invalidateCache(renderingId);
    }
    refreshCustomizations() {
        this.eventEmitter.emit('RefreshCustomizations');
    }
    onRefreshCustomizations(handler) {
        this.eventEmitter.on('RefreshCustomizations', handler);
    }
    refreshEverything() {
        this.usersPermissionService.invalidateCache();
        this.actionPermissionService.invalidateCache();
        this.renderingPermissionService.invalidateAllCache();
        // Emit RefreshCustomizations event
        this.eventEmitter.emit('RefreshCustomizations');
    }
}
exports.default = NativeRefreshEventsHandlerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF0aXZlLXJlZnJlc2gtZXZlbnRzLWhhbmRsZXItc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ldmVudHMtc3Vic2NyaXB0aW9uL25hdGl2ZS1yZWZyZXNoLWV2ZW50cy1oYW5kbGVyLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBa0M7QUFPbEMsTUFBcUIsaUNBQWlDO0lBR3BELFlBQ21CLHVCQUFnRCxFQUNoRCxzQkFBNkMsRUFDN0MsMEJBQXNEO1FBRnRELDRCQUF1QixHQUF2Qix1QkFBdUIsQ0FBeUI7UUFDaEQsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUF1QjtRQUM3QywrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBRXZFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxnQkFBWSxFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVNLFlBQVk7UUFDakIsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ2hELENBQUM7SUFFTSxZQUFZO1FBQ2pCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUNqRCxDQUFDO0lBRU0saUJBQWlCLENBQUMsWUFBaUM7UUFDeEQsS0FBSyxNQUFNLFdBQVcsSUFBSSxZQUFZO1lBQ3BDLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVNLHFCQUFxQjtRQUMxQixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFTSx1QkFBdUIsQ0FBQyxPQUFtQztRQUNoRSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRU0saUJBQWlCO1FBQ3RCLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUM5QyxJQUFJLENBQUMsdUJBQXVCLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDL0MsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFFckQsbUNBQW1DO1FBQ25DLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUM7SUFDbEQsQ0FBQztDQUNGO0FBeENELG9EQXdDQyJ9